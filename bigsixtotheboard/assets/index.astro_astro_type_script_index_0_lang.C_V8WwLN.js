const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gamemanager.TTEEEgK-.js","assets/bone-builder.Cy4GEgoj.js"])))=>i.map(i=>d[i]);
const P="modulepreload",B=function(e){return"/bigsixtotheboard/"+e},T={},E=function(t,o,s){let i=Promise.resolve();if(o&&o.length>0){let a=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),S=l?.nonce||l?.getAttribute("nonce");i=a(o.map(h=>{if(h=B(h),h in T)return;T[h]=!0;const y=h.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const d=document.createElement("link");if(d.rel=y?"stylesheet":P,y||(d.as="script"),d.crossOrigin="",d.href=h,S&&d.setAttribute("nonce",S),document.head.appendChild(d),y)return new Promise((v,G)=>{d.addEventListener("load",v),d.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},n={version:"0.1a",winningScore:150,directions:{NORTH:"north",EAST:"east",WEST:"west",SOUTH:"south",FIRST:"first"},Util:{},Errors:{},Error:{}},p={buildArrays:function(e){const t=[];for(let o=0;o<e;o++)t.push([]);return t},buildArrayWithValue:function(e){const t=[];for(let o=0;o<e;o++)t.push(0);return t}},c={to_s:function(e){let t="{"+e.light+":"+e.heavy;return t+="}",t},equals:function(e,t){return e.light==t.light&&e.heavy==t.heavy},isDouble:function(e){return e.light==e.heavy},matchesHeavyEnd:function(e,t){return e.heavy==t.heavy||e.heavy==t.light},matchesLightEnd:function(e,t){return e.light==t.heavy||e.light==t.light},isSuited:function(e,t){return c.matchesHeavyEnd(e,t)||c.matchesLightEnd(e,t)},getValue:function(e){return e.light+e.heavy}},f={markAsSpinner:function(e){return e.spinner=!0,e.matchValue=e.bone.light,e.endValue=e.bone.heavy,delete e.endConnectedTo,delete e.matchConnectedTo,e.eastConnectedTo=null,e.westConnectedTo=null,e.southConnectedTo=null,e.northConnectedTo=null,e},getValue:function(e){let t=0;return e.spinner?(e.eastConnectedTo===null||e.westConnectedTo===null)&&(t=e.bone.light+e.bone.heavy):e.endConnectedTo!==null&&e.matchConnectedTo!==null?t=0:c.isDouble(e.bone)?t=e.bone.light+e.bone.heavy:(e.endConnectedTo===null&&(t+=e.endValue),e.matchConnectedTo===null&&(t+=e.matchValue)),t},to_s:function(e){let t="{";return t+="player:"+e.player,e.pass?t+=", pass:true":(e.spinner&&(t+=",spinner:"+e.spinner),t+=", bone: "+c.to_s(e.bone),t+=", direction: "+e.direction),t+=",matchValue:"+e.matchValue,t+=",endValue:"+e.endValue,t+=",matchConnectedTo:"+e.matchConnectedTo,t+=",endConnectedTo:"+e.endConnectedTo,t+="}",t},setMeAsYourMatch:function(e,t){if(t.spinner){t.direction==n.directions.EAST?t.westConnectedTo=e.bone:t.direction==n.directions.WEST&&(t.eastConnectedTo=e.bone);return}else c.matchesHeavyEnd(t.bone,e.bone)?(t.matchValue=t.bone.heavy,t.endValue=t.bone.light):c.matchesLightEnd(t.bone,e.bone)&&(t.matchValue=t.bone.light,t.endValue=t.bone.heavy);t.matchConnectedTo=e.bone},matchOnFirst:function(e,t){e.endConnectedTo===null&&c.matchesHeavyEnd(e.bone,t.bone)?e.endConnectedTo=t.bone:e.matchConnectedTo===null&&c.matchesLightEnd(e.bone,t.bone)&&(e.matchConnectedTo=t.bone),f.setMeAsYourMatch(e,t)},matchOnSpinner:function(e,t){n.directions.EAST==t.direction&&e.eastConnectedTo===null?e.eastConnectedTo=t.bone:n.directions.WEST==t.direction&&e.westConnectedTo===null?e.westConnectedTo=t.bone:n.directions.SOUTH==t.direction&&e.southConnectedTo===null?e.southConnectedTo=t.bone:n.directions.NORTH==t.direction&&e.northConnectedTo===null&&(e.northConnectedTo=t.bone),f.setMeAsYourMatch(e,t)},matchBones:function(e,t,o,s,i){if(e.direction!=n.directions.FIRST&&e.direction!=s&&!e.spinner||!c.isSuited(e.bone,o))return null;const r=n.Play(t,o,s);return i&&f.markAsSpinner(r),e.spinner?f.matchOnSpinner(e,r):e.direction==n.directions.FIRST?f.matchOnFirst(e,r):(e.endConnectedTo=r.bone,f.setMeAsYourMatch(e,r)),r}},_={to_s:function(e){let t="number of players:"+e.number_of_players;t+=",players_hand:[";for(let o=0;o<e.players_hand.length;o++){t+="[";for(let s=0;s<e.players_hand[o].length;s++)t+=c.to_s(e.players_hand[o][s])+",";t+="],"}t+="],",t+="plays:[";for(let o=0;o<e.plays.length;o++)t+=f.to_s(e.plays[o]);t+="]",t+=",boneyard:[";for(let o=0;o<e.boneyard.length;o++)t+=c.to_s(e.boneyard[o]);t+="]",t+=",players_scoring:[";for(let o=0;o<e.players_scoring.length;o++){t+="[";for(let s=0;s<e.players_scoring[o].length;s++)t+=e.players_scoring[o][s]+",";t+="],"}return t+="]",t},isDomino:function(e){for(let t=0;t<e.players_hand.length;t++)if(e.players_hand[t].length===0)return!0;return!1},isLocked:function(e){return e.number_of_players==e.passes},isGameOver:function(e){for(let t=0;t<e.players_score.length;t++)if(e.players_score[t]>=n.winningScore)return!0;return!1},isRoundOver:function(e){return _.isLocked(e)||_.isDomino(e)},getWinner:function(e){for(let t=0;t<e.players_score.length;t++)if(e.players_score[t]>=n.winningScore)return t;return-1},resetRound:function(e){return e.passes=0,e.players_hand=p.buildArrays(e.number_of_players),e.players_played=p.buildArrays(e.number_of_players),e.boneyard=[],e.spinner=null,e.plays=[],e}},b={isDomino:function(e){for(let t=0;t<e.players_hand.length;t++)if(e.players_hand[t]===0)return!0;return!1},isLocked:function(e){return e.number_of_players==e.passes},isGameOver:function(e){for(let t=0;t<e.players_score.length;t++)if(e.players_score[t]>=n.winningScore)return!0;return!1},getWinner:function(e){for(let t=0;t<e.players_score.length;t++)if(e.players_score[t]>=n.winningScore)return t;return-1},isRoundOver:function(e){return b.isLocked(e)||b.isDomino(e)}};n.Util=Object.assign(p,{Bone:c,Play:f,State:_,View:b});const U={PASS:"pass",GAMEOVER:"gameover",SCORE:"score",LOCKED:"locked",DOMINO:"domino",MISSING:"missing",TURN:"turn",SYNC:"sync"};n.Errors=U;function w(e,t,o,s){this.kind=o,this.player=e,this.move=t,this.message=s}w.prototype=new Error;n.Error=w;n.Bone=function(e,t){return{light:e,heavy:t}};n.State=function(e,t){return{spinner:null,number_of_players:e,players_hand:n.Util.buildArrays(e),partners:t,plays:[],players_score:n.Util.buildArrayWithValue(e),players_scoring:n.Util.buildArrays(e),players_played:n.Util.buildArrays(e),current_player:-1,first_player:-1,boneyard:[],passes:0}};n.View=function(e,t){const o=new Array(e.number_of_players);for(let s=0;s<e.number_of_players;s++)o[s]=e.players_hand[s].length;return{boneyard:e.boneyard.length,hand:e.players_hand[t],number_of_players:e.number_of_players,current_player:e.current_player,passes:e.passes,plays:e.plays,me:t,players_hand:o,spinner:e.spinner,first_player:e.first_player,partners:e.partners,players_score:e.players_score}};n.Play=function(e,t,o){let s=!1;(t===null||typeof t>"u")&&(s=!0);let i=-1,r=-1;return n.directions.FIRST==o&&(i=t.heavy,r=t.light),{player:e,bone:t,direction:o,pass:s,spinner:!1,matchValue:r,endValue:i,matchConnectedTo:null,endConnectedTo:null}};n.Move=function(e,t,o){let s=0;return o!==null&&typeof o<"u"&&(s=o),{bone:e,direction:t,score:s}};n.Commentary=function(){return{winner:!1,domino:!1,locked:!1,lays:!1,pass:!1,downs:!1,player:-1,points:0,player_to_eat:-1,eat_points:0,bone:":",direction:null}};n.Errors={PASS:"pass",GAMEOVER:"gameover",SCORE:"score",LOCKED:"locked",DOMINO:"domino",MISSING:"missing",TURN:"turn",SYNC:"sync"};n.Error=function(e,t,o,s){this.kind=o,this.player=e,this.move=t,this.message=s};n.Error.prototype=new Error;n.Pen={};n.Pen=function(){this.round=function(e){if(e%5===0)return e;let t=e,o=e;for(;t%5!==0;)t++;for(;o%5!==0;)o--;const s=t-e,i=e-o;return s<i?t:o},this.getTheCount=function(e){let t=0;for(let o=0;o<e.length;o++)e[o].pass||(t+=n.Util.Play.getValue(e[o]));return t%5!==0&&(t=0),t},this.getTheDominoCount=function(e){let t=0;for(let o=0;o<e.length;o++)for(let s=0;s<e[o].length;s++)t+=e[o][s].light+e[o][s].heavy;return this.round(t)},this.getTheLockedCounts=function(e){const t=new Array(e.length);let o=200,s=0;const i=new Array(e.length);for(let r=0;r<e.length;r++){let a=0;for(let l=0;l<e[r].length;l++)a+=e[r][l].light+e[r][l].heavy;a<o&&(o=a),t[r]=a}for(let r=0;r<t.length;r++)t[r]!=o&&(s+=t[r]);for(let r=0;r<t.length;r++)t[r]==o?i[r]=this.round(s):i[r]=0;return i}};n.Scanner={};n.Scanner=function(e){this.plays=e};n.Scanner.prototype.isPlayable=function(e){if(this.plays.length===0)return!0;for(let t=0;t<this.plays.length;t++){if(this.plays[t].pass)continue;const o=this.plays[t];if(this.availableForPlay(o)&&(this.plays[t].spinner&&n.Util.Bone.isSuited(e,o.bone)||o.endConnectedTo===null&&(e.light==o.endValue||e.heavy==o.endValue)||o.matchConnectedTo===null&&(e.light==o.matchValue||e.heavy==o.matchValue)))return!0}return!1};n.Scanner.prototype.availableForPlay=function(e){return e.spinner&&(e.southConnectedTo===null||e.northConnectedTo===null||e.eastConnectedTo===null||e.westConnectedTo===null)?!0:!e.spinner&&(e.endConnectedTo===null||e.matchConnectedTo===null)};n.Scanner.prototype.getPlayableEnds=function(){const e=[];for(let t=0;t<this.plays.length;t++)this.plays[t].pass||this.availableForPlay(this.plays[t])&&e.push(this.plays[t]);return e};n.Scanner.prototype.isHandPlayable=function(e){for(let t=0;t<e.length;t++)if(this.isPlayable(e[t]))return!0;return!1};n.Scanner.prototype.getAvailableMoves=function(e){const t=[];if(this.plays.length===0){for(let s=0;s<e.length;s++)t.push(n.Move(e[s],n.directions.FIRST));return t}const o=this.getPlayableEnds();for(let s=0;s<e.length;s++)for(let i=0;i<o.length;i++)n.Util.Bone.isSuited(e[s],o[i].bone)&&(o[i].spinner?o[i].eastConnectedTo===null||o[i].westConnectedTo===null?(o[i].eastConnectedTo===null&&t.push(n.Move(e[s],n.directions.EAST)),o[i].westConnectedTo===null&&t.push(n.Move(e[s],n.directions.WEST))):(o[i].northConnectedTo===null&&t.push(n.Move(e[s],n.directions.NORTH)),o[i].southConnectedTo===null&&t.push(n.Move(e[s],n.directions.SOUTH))):o[i].direction==n.directions.FIRST?o[i].endConnectedTo===null&&(e[s].light==o[i].endValue||e[s].heavy==o[i].endValue)?t.push(n.Move(e[s],n.directions.EAST)):o[i].matchConnectedTo===null&&(e[s].light==o[i].matchValue||e[s].heavy==o[i].matchValue)&&t.push(n.Move(e[s],n.directions.WEST)):o[i].endConnectedTo===null&&(e[s].light==o[i].endValue||e[s].heavy==o[i].endValue)&&t.push(n.Move(e[s],o[i].direction)));return t};n.Scanner.prototype.getTargetPlayFor=function(e){const t=this.getPlayableEnds();let o=null,s=null;for(let i=t.length-1;i>=0&&!(n.Util.Bone.isSuited(t[i].bone,e.bone)&&(t[i].spinner&&(e.direction==n.directions.NORTH||n.directions.SOUTH==e.direction)||e.direction==t[i].direction&&(t[i].endConnectedTo===null||t[i].endConnectedTo===void 0)&&(e.bone.light==t[i].endValue||e.bone.heavy==t[i].endValue)?s=t[i]:t[i].direction==n.directions.FIRST&&((t[i].endConnectedTo===null||t[i].endConnectedTo===void 0)&&(e.bone.light==t[i].endValue||e.bone.heavy==t[i].endValue)||(t[i].matchConnectedTo===null||t[i].matchConnectedTo===void 0)&&(e.bone.light==t[i].matchValue||e.bone.heavy==t[i].matchValue))&&(o=t[i]),s||o));i--);return s||o||null};n.Analysis={};n.Analysis=function(e){this.suits=[0,0,0,0,0,0,0],this.moves=[],this.view=e,this.scanner=new n.Scanner(this.view.plays),this.pen=new n.Pen,this.reset(),this.canPlay=function(){return this.moves.length>0}};n.Analysis.prototype.getValueForMove=function(e){const t=this.view.plays;let o=0;if(t.length===0)o=n.Util.Bone.getValue(e.bone);else{const s=this.scanner.getPlayableEnds(),i=this.scanner.getTargetPlayFor(e);if(i===null)return o;for(let r=0;r<s.length;r++)n.Util.Bone.equals(s[r].bone,i.bone)?(i.spinner?o+=n.Util.Play.getValue(i):n.directions.FIRST==i.direction&&(i.matchConnectedTo===null&&n.Util.Bone.matchesHeavyEnd(i.bone,e.bone)?o+=i.bone.light:i.endConnectedTo===null&&n.Util.Bone.matchesLightEnd(i.bone,e.bone)&&(o+=i.bone.heavy)),n.Util.Bone.isDouble(e.bone)?o+=n.Util.Bone.getValue(e.bone):n.Util.Bone.matchesHeavyEnd(e.bone,i.bone)?o+=e.bone.light:n.Util.Bone.matchesLightEnd(e.bone,i.bone)&&(o+=e.bone.heavy)):o+=n.Util.Play.getValue(s[r])}return o%5!==0&&(o=0),o};n.Analysis.prototype.reset=function(){this.suits=[0,0,0,0,0,0,0];for(let e=0;e<this.view.plays.length;e++)this.view.plays[e].pass||(n.Util.Bone.isDouble(this.view.plays[e].bone)?this.suits[this.view.plays[e].bone.light]+=1:(this.suits[this.view.plays[e].bone.light]+=1,this.suits[this.view.plays[e].bone.heavy]+=1));this.moves=[],this.moves=this.scanner.getAvailableMoves(this.view.hand);for(let e=0;e<this.moves.length;e++){const t=this.getValueForMove(this.moves[e]);this.moves[e].score=t}};n.Commentator={};n.Commentator=function(e){this.names=e,this.pen=new n.Pen,this.comment=n.Commentary()};n.Commentator.prototype.getCommentary=function(e){if(this.comment=n.Commentary(),e===null||e.plays.length===0)return this.comment;try{this.announceMove(e)}catch(t){throw t.message="get commentary: "+t.message,t}return this.comment};n.Commentator.prototype.convertToPhrase=function(e){return e&&e.length>0?e.join(" "):""};n.Commentator.prototype.announceMove=function(e){const t=this.getLastPlay(e);if(n.Util.State.isGameOver(e))this.comment.player=n.Util.State.getWinner(e),this.comment.winner=!0,n.Util.State.isLocked(e)?this.sayLockedGame(e):this.sayRegularMove(e);else if(n.Util.State.isDomino(e)){this.comment.player=t.player,this.comment.domino=!0;const o=this.lastScore(e.players_scoring[t.player]);o>0&&(this.comment.points=o)}else n.Util.State.isLocked(e)?this.sayLockedGame(e):t.pass?(this.comment.player=t.player,this.comment.pass=!0):this.sayRegularMove(e)};n.Commentator.prototype.sayLockedGame=function(e){let t=-1;for(let s=0;s<e.plays.length;s++)e.plays[s].pass||(t=e.plays[s].player);if(t==-1)throw e.to_s();this.comment.player=t,this.comment.locked=!0;const o=this.pen.getTheLockedCounts(e.players_hand);for(let s=0;s<o.length;s++)o[s]!==0&&(this.comment.player_to_eat=s,this.comment.eat_points=o[1])};n.Commentator.prototype.sayRegularMove=function(e){const t=this.getLastPlay(e);this.comment.player=t.player,this.comment.bone=t.bone.light+":"+t.bone.heavy,e.plays.length==1?this.comment.downs=!0:(this.comment.lays=!0,this.comment.direction=t.direction);const o=this.pen.getTheCount(e.plays);o>0&&(this.comment.points=o)};n.Commentator.prototype.getPlayersName=function(e){return this.names[e]};n.Commentator.prototype.getLastPlay=function(e){return e.plays[e.plays.length-1]};n.Commentator.prototype.lastScore=function(e){let t=0;const o=e.length-1;return o>=0&&(t=e[o]),t};n.GamePlay={};n.GamePlay=function(e){this.state=e,this.pen=new n.Pen};n.GamePlay.prototype.startRound=function(){let e=9;this.state.number_of_players==4&&(e=7),this.state.boneyard=[n.Bone(0,0),n.Bone(0,1),n.Bone(0,2),n.Bone(0,3),n.Bone(0,4),n.Bone(0,5),n.Bone(0,6),n.Bone(1,1),n.Bone(1,2),n.Bone(1,3),n.Bone(1,4),n.Bone(1,5),n.Bone(1,6),n.Bone(2,2),n.Bone(2,3),n.Bone(2,4),n.Bone(2,5),n.Bone(2,6),n.Bone(3,3),n.Bone(3,4),n.Bone(3,5),n.Bone(3,6),n.Bone(4,4),n.Bone(4,5),n.Bone(4,6),n.Bone(5,5),n.Bone(5,6),n.Bone(6,6)],this.state.boneyard.sort(function(){return .5-Math.random()});for(let t=0;t<this.state.players_hand.length;t++)for(let o=0;o<e;o++)this.state.players_hand[t].push(this.state.boneyard.pop())};n.GamePlay.prototype.pullFromBoneyard=function(){this.state.players_hand[this.state.current_player].push(this.state.boneyard.pop())};n.GamePlay.prototype.whatIsFirstPlay=function(){let e=[6,5,4,3,2,1,0],t={player:-1,move:null};for(let o=0;o<e.length;o++)for(let s=0;s<this.state.players_hand.length;s++)for(let i=0;i<this.state.players_hand[s].length;i++)if(n.Util.Bone.isDouble(this.state.players_hand[s][i])&&this.state.players_hand[s][i].light==e[o])return t.player=s,t.move=n.Move(this.state.players_hand[s][i],n.directions.FIRST),t;return t};n.GamePlay.prototype.pass=function(e){if(new n.Analysis(new n.View(this.state,e)).canPlay())throw new n.Error(e,null,n.Errors.TURN,"player "+e+" can still play");this.state.passes+=1;let o=new n.Play(e);if(this.state.plays.push(o),!n.Util.State.isLocked(this.state))this.nextPlayer();else{let s=this.pen.getTheLockedCounts(this.state.players_hand);for(let i=0;i<s.length;i++)s[i]>0&&(this.state.players_score[i]+=s[i],this.state.players_scoring[i].push(s[i]))}};n.GamePlay.prototype.receivePlay=function(e,t){if(n.Util.State.isGameOver(this.state))throw new n.Error(e,t,n.Errors.GAMEOVER,"The game is over.");if(n.Util.State.isLocked(this.state))throw new n.Error(e,t,n.Errors.LOCKED,"The game is locked.");if(n.Util.State.isRoundOver(this.state))throw new n.Error(e,t,n.Errors.DOMINO,"The round is over.");if(t.bone===null)throw new n.Error(e,t,n.Errors.MISSING,"The bone is missing");if(t.direction===null)throw new n.Error(e,t,n.Errors.MISSING,"The direction is missing.");if(e!=this.state.current_player)throw new n.Error(e,t,n.Errors.TURN,"Wrong player "+e+" and "+this.state.current_player);for(let o=0;o<this.state.plays.length;o++)if(!this.state.plays[o].pass&&n.Util.Bone.equals(this.state.plays[o].bone,t.bone))throw new n.Error(e,t,n.Errors.SYNC,"The bone "+t.bone.light+":"+t.bone.heavy+" has already been played.");if(this.layBone(e,t),this.state.passes=0,!n.Util.State.isGameOver(this.state))if(n.Util.State.isDomino(this.state)){let o=this.pen.getTheDominoCount(this.state.players_hand);this.state.players_score[this.state.current_player]+=o,this.state.players_scoring[this.state.current_player].push(o)}else this.nextPlayer()};n.GamePlay.prototype.layBone=function(e,t){let o=new n.Scanner(this.state.plays),s=null;if(this.state.plays.length===0)t.direction=n.directions.FIRST;else if(s=o.getTargetPlayFor(t),s===null)throw new n.Error(e,t,n.Errors.TURN,"bad play "+t.bone.light+":"+t.bone.heavy+" in "+t.direction+" direction");let i=this.removeFromHand(e,t.bone);if(i===null)throw new n.Error(e,null,n.Errors.TURN,"The bone "+t.bone.light+":"+t.bone.heavy+" is not in the players hand.");this.state.players_played[e].push(i),this.state.plays.length===0?(this.state.plays[0]=new n.Play(e,i,t.direction),n.Util.Bone.isDouble(i)&&(n.Util.Play.markAsSpinner(this.state.plays[0]),this.state.spinner=this.state.plays[0])):this.state.spinner===null&&n.Util.Bone.isDouble(i)?(this.state.spinner=n.Util.Play.matchBones(s,e,i,t.direction,!0),this.state.plays.push(this.state.spinner)):this.state.plays.push(n.Util.Play.matchBones(s,e,i,t.direction,!1));let r=this.pen.getTheCount(this.state.plays);r>0&&(this.state.players_score[e]+=r,this.state.players_scoring[e].push(r))};n.GamePlay.prototype.nextPlayer=function(){if(!n.Util.State.isRoundOver(this.state))return this.state.current_player+=1,this.state.current_player==this.state.players_hand.length&&(this.state.current_player=0),this.state.current_player};n.GamePlay.prototype.removeFromHand=function(e,t){for(let o=0;o<this.state.players_hand[e].length;o++)if(n.Util.Bone.equals(t,this.state.players_hand[e][o]))return this.state.players_hand[e].splice(o,1)[0];return null};n.Android={};n.Android=function(e){this.view=e,this.analysis=new n.Analysis(this.view),this.player=function(){return this.view.me},this.canPlay=function(){return this.analysis.moves.length>0},this.getMove=function(){return this.canPlay()?(this.analysis.moves.sort(function(t,o){return o.score-t.score}),this.analysis.moves[0]):null}};n.GameController={};n.GameController=function(e){this.state=e,this.game=new n.GamePlay(this.state)};n.GameController.prototype.startTheHand=function(e,t){if(n.Util.State.resetRound(this.state),this.game.startRound(),e){let o=this.game.whatIsFirstPlay();this.state.current_player=o.player,this.state.first_player=o.player,this.game.receivePlay(o.player,o.move)}else this.state.first_player=t,this.state.current_player=t};n.GameController.prototype.turn=function(e,t){if(e>=0&&e<4)t==null?this.state.boneyard.length===0?this.game.pass(e):this.game.pullFromBoneyard():this.game.receivePlay(e,t);else{let o=this.getMoveFromAndroid();for(;o===null&&this.state.boneyard.length>0;)try{this.game.pullFromBoneyard(),o=this.getMoveFromAndroid()}catch(s){throw s.message="Android pull: "+s.message,s}if(o===null)try{this.game.pass(this.state.current_player)}catch(s){throw s.message="Android pass: "+s.message,s}else try{this.game.receivePlay(this.state.current_player,o)}catch(s){throw s.message="Android play: "+s.message,s}}};n.GameController.prototype.getMoveFromAndroid=function(){let e=null;try{let t=new n.View(this.state,this.state.current_player);e=new n.Android(t).getMove()}catch(t){throw t.message="Android get move: "+t.message,t}return e};n.GameController.prototype.isStopped=function(){let e=!1;return e=n.Util.State.isGameOver(this.state)||n.Util.State.isLocked(this.state)||n.Util.State.isRoundOver(this.state),e};const m={number_of_players:2,delayedEvent:null,width:700,height:500,domino:{width:20,height:40},overflow_direction:{east:"south",west:"north",north:"west",south:"east"},isTall:function(e,t,o){return e==t&&(o==n.directions.EAST||o==n.directions.WEST)?!0:e==t&&(o==n.directions.NORTH||o==n.directions.SOUTH)||e!=t&&(o==n.directions.EAST||o==n.directions.WEST)?!1:e!=t&&(o==n.directions.NORTH||o==n.directions.SOUTH)||e==t&&o==n.directions.FIRST},delayEvent:function(e,t,o){m.delayedEvent&&m.clearDelayedEvents(),m.delayedEvent=window.setTimeout(function(){o(t)},e)},clearDelayedEvents:function(){m.delayedEvent&&clearTimeout(m.delayedEvent),m.delayedEvent=null}},u={manager:null,render:function(e){const t=document.getElementById(e.element);if(!t){console.error(`[SelectGame] Container element '${e.element}' not found`);return}console.log("[SelectGame] Container found:",t),u.setNumberOfPlayers({data:e});const o=document.getElementById("choice-players-2"),s=document.getElementById("choice-players-3"),i=document.getElementById("choice-players-4");console.log("[SelectGame] Found elements:",{choice2:o,choice3:s,choice4:i}),o&&(console.log("[SelectGame] Attaching listener to choice-players-2"),o.addEventListener("click",()=>{console.log("[SelectGame] 2-player game clicked!"),u.setNumberOfPlayers({data:{element:e.element,number_of_players:2,player_names:e.player_names}})})),s&&(console.log("[SelectGame] Attaching listener to choice-players-3"),s.addEventListener("click",()=>{console.log("[SelectGame] 3-player game clicked!"),u.setNumberOfPlayers({data:{element:e.element,number_of_players:3,player_names:e.player_names}})})),i&&(console.log("[SelectGame] Attaching listener to choice-players-4"),i.addEventListener("click",()=>{console.log("[SelectGame] 4-player game clicked!"),u.setNumberOfPlayers({data:{element:e.element,number_of_players:4,player_names:e.player_names}})}))},startGame:async function(e){console.log("[SelectGame] Starting game, removing selection components and inserting Skeleton...");const t=document.getElementById("seated-at-table");t&&(t.remove(),console.log("[SelectGame] Removed seated-at-table from DOM"));const o=document.getElementById("choose-game-container");o&&(o.remove(),console.log("[SelectGame] Removed choose-game-container from DOM"));const{generateSkeletonHTML:s}=await E(async()=>{const{generateSkeletonHTML:l}=await import("./skeleton-template.C1yh2Qd7.js");return{generateSkeletonHTML:l}},[]),i=s(e.number_of_players,e.player_names),r=document.getElementById("thewholegame");if(r)r.innerHTML=i,console.log("[SelectGame] Inserted Skeleton HTML into DOM");else{console.error("[SelectGame] Could not find thewholegame container");return}const{default:a}=await E(async()=>{const{default:l}=await import("./gamemanager.TTEEEgK-.js");return{default:l}},__vite__mapDeps([0,1]));u.manager=new a(e),u.manager.start(!0),u.manager.gameRotation(),console.log("[SelectGame] Game started successfully")},restartGame:function(e){console.log("[SelectGame] Restarting game, switching back to selection screen..."),window.location.reload()},setNumberOfPlayers:function(e){console.log("[SelectGame] setNumberOfPlayers called with:",e.data.number_of_players),m.number_of_players=e.data.number_of_players;const t={number_of_players:e.data.number_of_players,human:0,element:e.data.element,player_names:e.data.player_names,restart_callback:u.restartGame};u.updateCardTable(e.data.number_of_players,e.data.player_names);const o=document.getElementById("start-game");if(console.log("[SelectGame] Looking for start-game element:",o),o){const s=o.cloneNode(!0);o.parentNode?.replaceChild(s,o);const i=document.getElementById("start-game");i?(console.log("[SelectGame] Attaching click listener to start-game button"),i.addEventListener("click",()=>{console.log("[SelectGame] PLAY button clicked! Starting game..."),u.startGame(t)})):console.error("[SelectGame] Could not find start-game element after replacement")}else console.error("[SelectGame] start-game element not found in DOM")},updateCardTable:function(e,t){console.log(`[SelectGame] Updating card table for ${e} players`);const o=document.getElementById("seated-at-table");if(!o){console.error("[SelectGame] seated-at-table element not found");return}const s=o.querySelectorAll(".seat");console.log(`[SelectGame] Found ${s.length} seats`),s[1]&&(e>2?(s[1].textContent=t[1],s[1].style.display=""):(s[1].textContent="",s[1].style.display="none")),s[2]&&(e>2?s[2].textContent=t[2]:s[2].textContent=t[1]),s[3]&&(s[3].textContent=t[0]),s[6]&&(e>3?(s[6].textContent=t[3],s[6].style.display=""):(s[6].textContent="",s[6].style.display="none")),console.log("[SelectGame] Card table updated successfully")}};console.log("Big Six Bones - Initializing game...");document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C();function C(){console.log("DOM ready, initializing SelectGame..."),u.render({element:"thewholegame",number_of_players:2,player_names:["You","Robot 1","Robot 2","Robot 3"]}),console.log("SelectGame initialized successfully")}export{n as B,u as S,m as a};
